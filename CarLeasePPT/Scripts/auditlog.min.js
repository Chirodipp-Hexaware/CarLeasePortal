var table,showReviewed=!1,showInfo=!1;window.utc_aft="";$(document).ready(function(){window.utc_aft=$("#aft").data("token");$("#show_reviewed").on("change",function(){showReviewed=this.checked;table.column(6).visible(this.checked);table.draw()});$("#show_info").on("change",function(){showInfo=this.checked;table.draw()});table=$("#auditlog_table").DataTable({processing:!0,serverSide:!0,ajax:{url:"/api/AuditLogData",type:"POST",data:function(n){n.search.show_excluded=showReviewed;n.search.show_info=showInfo},headers:{RequestVerificationToken:window.utc_aft}},stateSave:!0,stateSaveParams:function(n,t){t.search.show_excluded=showReviewed;t.search.show_info=showInfo},stateLoadParams:function(n,t){$("#show_reviewed").prop("checked",t.search.show_excluded);$("#show_info").prop("checked",t.search.show_info);showReviewed=t.search.show_excluded;showInfo=t.search.show_info},ordering:!1,searching:!1,createdRow:function(n,t){t.LogLevel==="Warn"?$(n).addClass("warning-row"):t.LogLevel==="Error"&&$(n).addClass("danger-row")},columns:[{className:"td-nowrap",data:"Logged",render:function(n){return null!==n?new Date(Date.parse(n)).toLocaleString():""}},{className:"td-nowrap",data:"LogLevel"},{className:"td-nowrap",data:"PersonFullName"},{data:"Message"},{className:"td-nowrap",data:"Controller"},{className:"td-nowrap",data:"Action"},{className:"td-nowrap",data:"IsReviewedString"},{className:"td-nowrap action",data:"AuditLogId",render:function(n,t,i){var r='<a class="btn btn-secondary btn-sm" href="/AuditLog/Detail/'+n+'">View<\/a>';return i.IsReviewed||(r+=' <a class="btn btn-secondary btn-sm" href="/AuditLog/MarkReviewed/'+n+'">Mark<\/a>'),r}}]});table.column(6).visible(showReviewed)});